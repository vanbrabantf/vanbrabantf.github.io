<!DOCTYPE HTML>
<html lang="en">
<html>
	<head>
    	<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="description" content="Webdeveloper from Antwerp Belgium with a love for legacy code and APIs">
    	<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="Frederick Vanbrabant" />
    	<title>Frederick Vanbrabant delirious rantings</title>

		
		<meta name="twitter:site" content="@maybefrederick" />
        <meta name="twitter:description" content="" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:creator" content="@maybefrederick" />
		<meta name="twitter:title" content="The simple class" />

		
			<meta property="og:image" content="https://frederickvanbrabant.com/assets/posts/2019-04-03-the-simple-class/tump.jpg" />
			<meta name="twitter:image" content="https://frederickvanbrabant.com/assets/posts/2019-04-03-the-simple-class/tump.jpg" />
		


    	
    	<meta name="msapplication-tap-highlight" content="no">

    	
    	<link rel="manifest" href="/assets/manifest.json">

    	 
	    <meta name="mobile-web-app-capable" content="yes">
	    <meta name="application-name" content="Frederick Vanbrabant delirious rantings">
	    <link rel="icon" sizes="192x192" href="/assets/images/touch/chrome-touch-icon-192x192.png">

	    
	    <meta name="apple-mobile-web-app-capable" content="yes">
	    <meta name="apple-mobile-web-app-status-bar-style" content="black">
	    <meta name="apple-mobile-web-app-title" content="Frederick Vanbrabant delirious rantings">
	    <link rel="apple-touch-icon" href="/assets/images/touch/chrome-touch-icon-192x192.png">

	    
	    <meta name="msapplication-TileImage" content="/assets/images/touch/chrome-touch-icon-144x144.png">
	    <meta name="msapplication-TileColor" content="#d52349">

	    
    	<meta name="theme-color" content="#d52349">

		<script>
			if ('serviceWorker' in navigator) {
				window.addEventListener('load', function() {
					navigator.serviceWorker.register('/assets/js/serviceworker.js').then(function(registration) {
						
						console.log('ServiceWorker registration successful with scope: ', registration.scope);
					}).catch(function(err) {
						
						console.log('ServiceWorker registration failed: ', err);
					});
				});
			}
		</script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
		<link rel="stylesheet" href="/assets/css/style.css" />
	</head>


<div class="container">
        <div class="row header">
            <div class="col padding-0">
                <h1><a href="/index.html">Frederick Vanbrabant's</a></h1>
                <h2>delirious rantings</h2>
            </div>
        </div>
    </div>
    <div class="jumbotron cover-image" style="background-image: url('/assets/posts/2019-04-03-the-simple-class/header.jpg');" >
    </div>
        
    <div id="main-wrapper">
	<div class="container">
		<div class="row">
			<div class="col">
			
				<section>
					<header class="blog-title">
						<h1>The simple class</h1>
						<p>Posted 3 April, 2019- About 5 mins to read</p>
					</header>
					<div class="row blog-body">
						<div class="col">
							<section>
								<p>I work in many legacy code bases, and in fact, I’ve made it a big part of my career. I love diving into big monoliths that have grown out of proportion and tidying them up. One of the best parts of that work is rewriting a God class into a collection of small reusable classes. Let’s take a look at what makes a simple class great.</p>
<p>One of my favourite types of classes is a value object. For those not in the known, a value object is a small class that holds a value with a tiny bit of extra logic surrounding it. Sounds simple enough right? I think a nice way of looking at these classes is implementing them as an extension of the type system of your programming language. Let take a look at an uncomplicated example.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">declare</span>(<span style="color:#a6e22e">strict_types</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>);

<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CustomerName</span>
{
    <span style="color:#66d9ef">private</span> $firstName;

    <span style="color:#66d9ef">private</span> $lastName;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __construct(<span style="color:#a6e22e">string</span> $firstName, <span style="color:#a6e22e">string</span> $lastName)
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">firstName</span> <span style="color:#f92672">=</span> $firstName;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">lastName</span> <span style="color:#f92672">=</span> $lastName;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">firstName</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
    {
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">firstName</span>;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">lastName</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
    {
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">lastName</span>;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fullName</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
    {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sprintf</span>(
            <span style="color:#e6db74">&#39;%s %s&#39;</span>,
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">firstName</span>(),
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">lastName</span>()
        );
    }
}
</code></pre></div><p>This small class doesn’t do anything really, and it just holds two strings. The only tiny bit of function (on first glance) is that it concatenates the two strings. However, for the minimal amount of code in this class, it does offer a ton of value to your code base.</p>
<h1 id="putting-an-end-to-the-class-struggle">Putting an end to the class struggle</h1>
<p>Once we start replacing every occurrence of the first name and last name with this simple class, you will quickly begin to see the value. First of all, every time you come across this class in your code, you know that it has a first name and a last name in it. You also know that both of these values will be strings. And that you have an easy way to display the first name - last name combination.</p>
<p>You can now also add this as a safety in your new classes. You could, for example, do something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">sendMail</span>(
        <span style="color:#a6e22e">CustomerName</span> $customerName,
        <span style="color:#a6e22e">Email</span> $email
    )<span style="color:#f92672">:</span> <span style="color:#a6e22e">void</span>
    {
        $mail <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Mail</span>($customerName<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">fullName</span>(), $email);

        <span style="color:#75715e">// send mail
</span><span style="color:#75715e"></span>    }
</code></pre></div><p>Here you easily guard your method from all kinds of extra logic. You know that the variables that enter the method are of the type Email and Customer class.</p>
<p>There is however still a major issue with our values objects. We could still trick our system into accepting empty strings. Let’s take a look at how we can make these classes just a tiny bit more robust.</p>
<h1 id="putting-a-stop-to-empty-values">Putting a stop to empty values</h1>
<p>We know that our values in our object will always be of the type string, but “” is also a string. so you could do</p>
<p><code>new CustomerName('', '');</code> or even <code>new CustomerName('\$', '!');</code></p>
<p>You could allow that last one if you are building a platform for rappers, but in most cases, you would want to guard against that.</p>
<p>If you are using PHP (like the examples are), I would suggest using a package like <a href="https://github.com/webmozart/assert">webmozart/assert</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __construct(<span style="color:#a6e22e">string</span> $firstName, <span style="color:#a6e22e">string</span> $lastName)
    {
        <span style="color:#a6e22e">Assert</span><span style="color:#f92672">::</span><span style="color:#a6e22e">stringNotEmpty</span>($firstName);
        <span style="color:#a6e22e">Assert</span><span style="color:#f92672">::</span><span style="color:#a6e22e">stringNotEmpty</span>($lastName);
        <span style="color:#a6e22e">Assert</span><span style="color:#f92672">::</span><span style="color:#a6e22e">alpha</span>($firstName);
        <span style="color:#a6e22e">Assert</span><span style="color:#f92672">::</span><span style="color:#a6e22e">alpha</span>($lastName);

        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">firstName</span> <span style="color:#f92672">=</span> $firstName;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">lastName</span> <span style="color:#f92672">=</span> $lastName;
    }
</code></pre></div><p>(you could add a private validation method to the class that is called on the first line of the constructor if there are many validation rules)</p>
<p>The class is now a lot smarter; it validates the values that come in and will throw an exception when they don’t meet the expectations of the class.</p>
<p>Now you can be sure that whenever you encounter this class, the values within will be usable.</p>
<h1 id="adding-more-means-of-production-to-the-classes">Adding more means of production to the classes</h1>
<p>It might be very tempting to start now adding more and more logic to these classes. However, I would caution restraint here.</p>
<p>A common thing you see is people adding getters and setters to these classes. You might notice we already have getters (we just not named them getters), and I would strongly recommend against adding setters.</p>
<p>If you need to update a value in the class, create a new instance of the class. Value objects are meant to be built and discarded. By creating new value objects you also make sure you pass the constructor every time, and therefore including the validation.</p>
<p>If you really feel like adding setters, make sure they create new instances themselves:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">setFirstName</span>(<span style="color:#a6e22e">string</span> $firstName)<span style="color:#f92672">:</span> <span style="color:#a6e22e">CustomerName</span>
    {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">self</span>($firstName, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">lastName</span>());
    }
</code></pre></div><p>Another thing to touch upon is named constructors. A named constructor allows you to create the value object under different circumstances. I feel like it is easiest to explain with another example.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">declare</span>(<span style="color:#a6e22e">strict_types</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>);

<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CustomerName</span>
{
    <span style="color:#66d9ef">private</span> $firstName;

    <span style="color:#66d9ef">private</span> $lastName;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __construct(<span style="color:#a6e22e">string</span> $firstName, <span style="color:#a6e22e">string</span> $lastName)
    {
        <span style="color:#a6e22e">Assert</span><span style="color:#f92672">::</span><span style="color:#a6e22e">stringNotEmpty</span>($firstName);
        <span style="color:#a6e22e">Assert</span><span style="color:#f92672">::</span><span style="color:#a6e22e">stringNotEmpty</span>($lastName);
        <span style="color:#a6e22e">Assert</span><span style="color:#f92672">::</span><span style="color:#a6e22e">alpha</span>($firstName);
        <span style="color:#a6e22e">Assert</span><span style="color:#f92672">::</span><span style="color:#a6e22e">alpha</span>($lastName);

        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">firstName</span> <span style="color:#f92672">=</span> $firstName;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">lastName</span> <span style="color:#f92672">=</span> $lastName;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fromFullName</span>(<span style="color:#a6e22e">string</span> $fullname)<span style="color:#f92672">:</span> <span style="color:#a6e22e">self</span>
    {
        $pieces <span style="color:#f92672">=</span> <span style="color:#a6e22e">explode</span>(<span style="color:#e6db74">&#39; &#39;</span>, $fullname);

        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">CustomerName</span>($pieces[<span style="color:#ae81ff">0</span>], $pieces[<span style="color:#ae81ff">1</span>]);
    }
}
</code></pre></div><p>(this example is to demonstrate the function of a named constructor. This method assumes that a name is always in 2 pieces with the first name as the first piece. If you want to implement this, please add extra logic)</p>
<p>These constructors are a small convenient way to create the value object. Named constructors allow for great flexibility. However, like always, you should not take this flexibility too far.</p>
<p>You should always ask yourself, is this method solving a real problem, or am I just adding this for a one-off small convenience?</p>
<p>Named constructors are very useful in a “Time” class, where you can create the class from a string format, or from the hour, minute and second parameters as further explained <a href="http://verraes.net/2014/06/named-constructors-in-php/">here</a> by <a href="https://twitter.com/mathiasverraes">Mathias Verraes</a>.</p>
<h1 id="in-closing">In closing</h1>
<p>There is still a lot to be said about value objects. We haven’t touched upon testing, logging, naming…</p>
<p>For more information about these topics, I would advise you to look into some DDD books or even better check out <a href="https://twitter.com/matthiasnoback">Matthias Noback</a>’s book <a href="https://leanpub.com/object-design">“Style Guide for Object Design”</a>. A book that prompted me to write this article. (I get no personal benefits for advertising this book, I just think it’s a great book)</p>
<p>If you haven’t implemented Value objects into your codebase, I would greatly advise you to give it a try. You will wonder how you ever lived without it.</p>
<pre><code>
</code></pre>
							</section>
						</div>
					</div>
				</section>
			</div>
		</div>
	</div>
</div><div class="container">
        <div class="row justify-content-center">
            <div class="col-9">
                <div class="bio-card">
                    <div class="row bio-card-body">
                        <div class="col-xs-12 col-md-5 bio-card-image">
                            <a href="https://twitter.com/maybeFrederick">
                                <img src="/assets/images/my-face.jpg" alt="my face" class="img-responsive" />
                            </a>
                        </div>
                        <div class="col-xs-12 col-md-7 bio-card-txt">
                            <h2>Hey thanks for reading!</h2>
                            <p>Hope you enjoyed this post. There is no comments section here, if you've ever seen the YouTube comments
                                section you'll probably understand why. If you have any remarks or comments on this topic, please
                                dont hesitate to reach out on
                                <a href="https://twitter.com/maybeFrederick">Twitter</a> or send me a
                                <a href="mailto:frederick@brodyandhooper.com" target="_top">mail.</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<div class="footer">
        <div class="container">
            <div class="padder">
                <div class="row">
                    <div class='col-sm-8 col-12'>
                        <section class='footer-items'>
                            <header>
                                <h2>Latest posts</h2>
                            </header>
                            <ul>
                                
                                <li>
                                    <h3><a href="https://frederickvanbrabant.com/post/2019-05-09-binary-tree/">What is a binary tree and why would I ever want to reverse it</a></h3>
                                </li>
                                
                                <li>
                                    <h3><a href="https://frederickvanbrabant.com/post/2019-04-03-the-simple-class/">The simple class</a></h3>
                                </li>
                                
                                <li>
                                    <h3><a href="https://frederickvanbrabant.com/post/2018-12-13-a-love-letter-to-legacy/">A love letter to legacy projects</a></h3>
                                </li>
                                
                                <li>
                                    <h3><a href="https://frederickvanbrabant.com/post/2018-10-08-integration-operation-segregation-principle/">The Integration Operation Segregation Principle</a></h3>
                                </li>
                                
                                <li>
                                    <h3><a href="https://frederickvanbrabant.com/post/2018-07-24-php-performance/">What performance tricks actually work</a></h3>
                                </li>
                                
                            </ul>
                        </section>
                    </div>
                    <div class='col-sm-4 col-12'>
                        <section class='footer-items'>
                            <header>
                                <h2>Who now?</h2>
                            </header>
                            <p>Frederick is a Webdeveloper from Antwerp Belgium with a love for legacy code and APIs. He is the founder of
                                Brody & Hooper</p>
    
                            If you want to stay up to date on my ramblings you can subscribe to this 90's thing called
                            <a href="https://frederickvanbrabant.com/post/index.xml">Rss</a>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </body>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
     crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
     crossorigin="anonymous"></script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    
        ga('create', 'UA-98268819-1', 'auto');
        ga('send', 'pageview');
    
    </script>
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/frederickvanbrabant.com"
        },
        "articleSection" : "post",
        "name" : "The simple class",
        "headline" : "The simple class",
        "description" : "I work in many legacy code bases, and in fact, I’ve made it a big part of my career. I love diving into big monoliths that have grown out of proportion and tidying them up. One of the best parts of that work is rewriting a God class into a collection of small reusable classes. Let’s take a look at what makes a simple class great.\nOne of my favourite types of classes is a value object.",
        "inLanguage" : "en-US",
        "author" : "Frederick Vanbrabnt",
        "creator" : "Frederick Vanbrabnt",
        "publisher": "Frederick Vanbrabnt",
        "accountablePerson" : "Frederick Vanbrabnt",
        "copyrightHolder" : "Frederick Vanbrabnt",
        "copyrightYear" : "2019",
        "datePublished": "2019-04-03 00:00:00 \x2b0000 UTC",
        "dateModified" : "2019-04-03 00:00:00 \x2b0000 UTC",
        "url" : "https:\/\/frederickvanbrabant.com\/post\/2019-04-03-the-simple-class\/",
        "wordCount" : "1051",
        "keywords" : [ "Blog" ]
    }
    </script>
    
    </html>